   `timescale 1ns / 1ps
module Sampler_tb;

    // Parameters
    parameter SAMPLER_WIDTH = 1344;
    parameter DLEN = 23;
    parameter HLEN = 10;


    // Testbench signals
    reg                   clk;
    reg                   reset;
    reg  [1:0]            mode;
    reg                   sampler_in_ready;
    reg  [SAMPLER_WIDTH-1:0] sampler_in;

    wire                  sampler_squeeze;
    wire                  next_element;

    reg  [3:0]            mem_sel;
    wire [22:0]           z0;
    wire [22:0]           z1;
    wire [9:0]            addr_z0;
    wire [9:0]            addr_z1;
    wire                  en_z;
    wire                  we_z;
    
    wire [22:0]           A0;
    wire [22:0]           A1;
    wire [11:0]           addr_A0;
    wire [11:0]           addr_A1;
    wire                  en_A;
    wire                  we_A;

    wire [22:0]           y0;
    wire [22:0]           y1;
    wire [7:0]            addr_y0;
    wire [7:0]            addr_y1;
    wire                  en_y;
    wire                  we_y;

    // c signals
    wire [22:0]           ci;
    wire [22:0]           cj;
    wire [7:0]            addr_ci;
    wire [7:0]            addr_cj;
    wire                  en_ci;
    wire                  en_cj;
    wire                  we_ci;
    wire                  we_cj;

    wire [DLEN-1:0] s0_q_a;
    wire [DLEN-1:0] s0_q_b;
    wire [DLEN-1:0] s1_q_a;
    wire [DLEN-1:0] s1_q_b;
    wire [DLEN-1:0] A_q_a;
    wire [DLEN-1:0] A_q_b;
    wire [DLEN-1:0] w_q_a;
    wire [DLEN-1:0] w_q_b;
    wire [DLEN-1:0] c_q_a;
    wire [DLEN-1:0] c_q_b;


    // Instantiate the Sampler module
    Sampler uut (
        .clk(clk),
        .reset(reset),
        .mode(mode),
        .sampler_in_ready(sampler_in_ready),
        .sampler_in(sampler_in),
        .sampler_squeeze(sampler_squeeze),
        .next_element(next_element),

        .z0(z0),
        .z1(z1),
        .addr_z0(addr_z0),
        .addr_z1(addr_z1),
        .en_z(en_z),
        .we_z(we_z),

        .A0(A0),
        .A1(A1),
        .addr_A0(addr_A0),
        .addr_A1(addr_A1),
        .en_A(en_A),
        .we_A(we_A),

        .y0(y0),
        .y1(y1),
        .addr_y0(addr_y0),
        .addr_y1(addr_y1),
        .en_y(en_y),
        .we_y(we_y),

        .ci(ci),
        .cj(cj),
        .addr_ci(addr_ci),
        .addr_cj(addr_cj),
        .en_ci(en_ci),
        .en_cj(en_cj),
        .we_ci(we_ci),
        .we_cj(we_cj)
    );

    Data_Mem DM(
        .clk(clk),
        .reset(reset),

        /*---s0---*/
        .s0_data_a(z0),
        .s0_data_b(z1),//
        .s0_addr_a(addr_z0),
        .s0_addr_b(addr_z1),
        .s0_en_a(en_z),
        .s0_en_b(en_z),
        .s0_we_a(we_z),
        .s0_we_b(we_z),
        .s0_q_a(s0_q_a),
        .s0_q_b(s0_q_b),

        /*---s1---*/
        .s1_data_a(z0),
        .s1_data_b(z1),//
        .s1_addr_a(addr_z0),
        .s1_addr_b(addr_z1),
        .s1_en_a(en_z),
        .s1_en_b(en_z),
        .s1_we_a(we_z),
        .s1_we_b(we_z),
        .s1_q_a(s1_q_a),
        .s1_q_b(s1_q_b),

        /*---A---*/
        .A_data_a(A0),
        .A_data_b(A1),//
        .A_addr_a(addr_A0),
        .A_addr_b(addr_A1),
        .A_en_a(en_A),
        .A_en_b(en_A),
        .A_we_a(we_A),
        .A_we_b(we_A),
        .A_q_a(A_q_a),
        .A_q_b(A_q_b),

        /*---y---*/
        .y_data_a(y0),
        .y_data_b(y1),//
        .y_addr_a({mem_sel[1:0],addr_y0}),
        .y_addr_b({mem_sel[1:0],addr_y1}),
        .y_en_a(en_y),
        .y_en_b(en_y),
        .y_we_a(we_y),
        .y_we_b(we_y),
        .y_q_a(y_q_a),
        .y_q_b(y_q_b),

        /*---c---*/
        .c_data_a(ci),
        .c_data_b(c_q_a),//
        .c_addr_a(addr_ci),
        .c_addr_b(addr_cj),
        .c_en_a(en_ci),
        .c_en_b(en_cj),
        .c_we_a(we_ci),
        .c_we_b(we_cj),
        .c_q_a(c_q_a),
        .c_q_b(c_q_b)
    );

    // Clock generation
    initial begin
        clk = 0;
        forever #5 clk = ~clk; // 100 MHz clock
    end

    // Task to apply reset
    task apply_reset;
        begin
            reset = 1;
            #100;
            reset = 0;
        end
    endtask

    // Task to send input
    task send_input;
        input [SAMPLER_WIDTH-1:0] data;
        begin
            sampler_in_ready = 1;
            sampler_in = data;
            #10;
            sampler_in_ready = 0;
        end
    endtask

    // Task to S0
    task S0;
        begin
            
            //s0_0
            /***Test Squeeze***/
            #170; //padder
            #240; //f_p
            mode = 0;
            #10 send_input(1344'h0000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffff20d0baa970640f7410232c5a64d84f854642ff782c849957e7502cb0b9e3acd41c2e6ce9e4a5dc9f3d5eb2339d8c0f34e08a145d5283f326a24c1d6b055c1d0e0a34e522cefc25564a38822716f4c02c55d5f79dce56aa7e0b264321aeaec2b2c7893195347e542e9da95168d4442c7de17c675b5d66a51f);
            wait(next_element);

            //s0_1
            #170; //padder
            #240; //f_p
            #10 send_input(1344'h000000000000000000000000000000000000000000000000000000000000000053bf73fc45a768c77aec54b96d65da20d0baa970640f7410232c5a64d84f854642ff782c849957e7502cb0b9e3acd41c2e6ce9e4a5dc9f3d5eb2339d8c0f34e08a145d5283f326a24c1d6b055c1d0e0a34e522cefc25564a38822716f4c02c55d5f79dce56aa7e0b264321aeaec2b2c7893195347e542e9da95168d4442c7de17c675b5d66a51bdf);
            wait(next_element);

            //s0_2
            #170; //padder
            #240; //f_p
            #10 send_input(1344'h000000000000000000000000000000000000000000000000000000000000000053bf73fc45a768c77aec54b96d65da20d0baa970640f7410232c5a64d84f854642ff782c849957e7502cb0b9e3acd41c2e6ce9e4a5dc9f3d5eb2339d8c0f34e08a145d5283f326a24c1d6b055c1d0e0a34e522cefc25564a38822716f4c02c55d5f79dce56aa7e0b264321aeaec2b2c7893195347e542e9da95168d4442c7de17c675b5d66a51bdf);
            wait(next_element);

            //s0_3
            #170; //padder
            #240; //f_p
            #10 send_input(1344'h000000000000000000000000000000000000000000000000000000000000000053bf73fc45a768c77aec54b96d65da20d0baa970640f7410232c5a64d84f854642ff782c849957e7502cb0b9e3acd41c2e6ce9e4a5dc9f3d5eb2339d8c0f34e08a145d5283f326a24c1d6b055c1d0e0a34e522cefc25564a38822716f4c02c55d5f79dce56aa7e0b264321aeaec2b2c7893195347e542e9da95168d4442c7de17c675b5d66a51bdf);  
            wait(next_element);
        end
    endtask

    // Task to A
    task A;
        begin
            //A_0
            /***Test Squeeze***/
            #170; //padder
            #240; //f_p
            mode = 1;
            #10 send_input(1344'h0000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffff20d0baa970640f7410232c5a64d84f854642ff782c849957e7502cb0b9e3acd41c2e6ce9e4a5dc9f3d5eb2339d8c0f34e08a145d5283f326a24c1d6b055c1d0e0a34e522cefc25564a38822716f4c02c55d5f79dce56aa7e0b264321aeaec2b2c7893195347e542e9da95168d4442c7de17c675b5d66a51f);
            wait(next_element);

            //A_1
            #170; //padder
            #240; //f_p
            #10 send_input(1344'h000000000000000000000000000000000000000000000000000000000000000053bf73fc45a768c77aec54b96d65da20d0baa970640f7410232c5a64d84f854642ff782c849957e7502cb0b9e3acd41c2e6ce9e4a5dc9f3d5eb2339d8c0f34e08a145d5283f326a24c1d6b055c1d0e0a34e522cefc25564a38822716f4c02c55d5f79dce56aa7e0b264321aeaec2b2c7893195347e542e9da95168d4442c7de17c675b5d66a51bdf);
            wait(next_element);

            //A_2
            #170; //padder
            #240; //f_p
            #10 send_input(1344'h000000000000000000000000000000000000000000000000000000000000000053bf73fc45a768c77aec54b96d65da20d0baa970640f7410232c5a64d84f854642ff782c849957e7502cb0b9e3acd41c2e6ce9e4a5dc9f3d5eb2339d8c0f34e08a145d5283f326a24c1d6b055c1d0e0a34e522cefc25564a38822716f4c02c55d5f79dce56aa7e0b264321aeaec2b2c7893195347e542e9da95168d4442c7de17c675b5d66a51bdf);
            wait(next_element);

            //A_3
            #170; //padder
            #240; //f_p
            #10 send_input(1344'h000000000000000000000000000000000000000000000000000000000000000053bf73fc45a768c77aec54b96d65da20d0baa970640f7410232c5a64d84f854642ff782c849957e7502cb0b9e3acd41c2e6ce9e4a5dc9f3d5eb2339d8c0f34e08a145d5283f326a24c1d6b055c1d0e0a34e522cefc25564a38822716f4c02c55d5f79dce56aa7e0b264321aeaec2b2c7893195347e542e9da95168d4442c7de17c675b5d66a51bdf); 
            wait(next_element);
            
            //A_4
            /***Test Squeeze***/
            #170; //padder
            #240; //f_p
            #10 send_input(1344'h0000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffff20d0baa970640f7410232c5a64d84f854642ff782c849957e7502cb0b9e3acd41c2e6ce9e4a5dc9f3d5eb2339d8c0f34e08a145d5283f326a24c1d6b055c1d0e0a34e522cefc25564a38822716f4c02c55d5f79dce56aa7e0b264321aeaec2b2c7893195347e542e9da95168d4442c7de17c675b5d66a51f);
            wait(next_element);

            //A_5
            #170; //padder
            #240; //f_p
            #10 send_input(1344'h000000000000000000000000000000000000000000000000000000000000000053bf73fc45a768c77aec54b96d65da20d0baa970640f7410232c5a64d84f854642ff782c849957e7502cb0b9e3acd41c2e6ce9e4a5dc9f3d5eb2339d8c0f34e08a145d5283f326a24c1d6b055c1d0e0a34e522cefc25564a38822716f4c02c55d5f79dce56aa7e0b264321aeaec2b2c7893195347e542e9da95168d4442c7de17c675b5d66a51bdf);
            wait(next_element);

            //A_6
            #170; //padder
            #240; //f_p
            #10 send_input(1344'h000000000000000000000000000000000000000000000000000000000000000053bf73fc45a768c77aec54b96d65da20d0baa970640f7410232c5a64d84f854642ff782c849957e7502cb0b9e3acd41c2e6ce9e4a5dc9f3d5eb2339d8c0f34e08a145d5283f326a24c1d6b055c1d0e0a34e522cefc25564a38822716f4c02c55d5f79dce56aa7e0b264321aeaec2b2c7893195347e542e9da95168d4442c7de17c675b5d66a51bdf);
            wait(next_element);

            //A_7
            #170; //padder
            #240; //f_p
            #10 send_input(1344'h000000000000000000000000000000000000000000000000000000000000000053bf73fc45a768c77aec54b96d65da20d0baa970640f7410232c5a64d84f854642ff782c849957e7502cb0b9e3acd41c2e6ce9e4a5dc9f3d5eb2339d8c0f34e08a145d5283f326a24c1d6b055c1d0e0a34e522cefc25564a38822716f4c02c55d5f79dce56aa7e0b264321aeaec2b2c7893195347e542e9da95168d4442c7de17c675b5d66a51bdf);  
            wait(next_element);
            
            //A_8
            /***Test Squeeze***/
            #170; //padder
            #240; //f_p
            #10 send_input(1344'h0000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffff20d0baa970640f7410232c5a64d84f854642ff782c849957e7502cb0b9e3acd41c2e6ce9e4a5dc9f3d5eb2339d8c0f34e08a145d5283f326a24c1d6b055c1d0e0a34e522cefc25564a38822716f4c02c55d5f79dce56aa7e0b264321aeaec2b2c7893195347e542e9da95168d4442c7de17c675b5d66a51f);
            wait(next_element);

            //A_9
            #170; //padder
            #240; //f_p
            #10 send_input(1344'h000000000000000000000000000000000000000000000000000000000000000053bf73fc45a768c77aec54b96d65da20d0baa970640f7410232c5a64d84f854642ff782c849957e7502cb0b9e3acd41c2e6ce9e4a5dc9f3d5eb2339d8c0f34e08a145d5283f326a24c1d6b055c1d0e0a34e522cefc25564a38822716f4c02c55d5f79dce56aa7e0b264321aeaec2b2c7893195347e542e9da95168d4442c7de17c675b5d66a51bdf);
            wait(next_element);

            //A_10
            #170; //padder
            #240; //f_p
            #10 send_input(1344'h000000000000000000000000000000000000000000000000000000000000000053bf73fc45a768c77aec54b96d65da20d0baa970640f7410232c5a64d84f854642ff782c849957e7502cb0b9e3acd41c2e6ce9e4a5dc9f3d5eb2339d8c0f34e08a145d5283f326a24c1d6b055c1d0e0a34e522cefc25564a38822716f4c02c55d5f79dce56aa7e0b264321aeaec2b2c7893195347e542e9da95168d4442c7de17c675b5d66a51bdf);
            wait(next_element);

            //A_11
            #170; //padder
            #240; //f_p
            #10 send_input(1344'h000000000000000000000000000000000000000000000000000000000000000053bf73fc45a768c77aec54b96d65da20d0baa970640f7410232c5a64d84f854642ff782c849957e7502cb0b9e3acd41c2e6ce9e4a5dc9f3d5eb2339d8c0f34e08a145d5283f326a24c1d6b055c1d0e0a34e522cefc25564a38822716f4c02c55d5f79dce56aa7e0b264321aeaec2b2c7893195347e542e9da95168d4442c7de17c675b5d66a51bdf);  
            wait(next_element);
            
            //A_12
            /***Test Squeeze***/
            #170; //padder
            #240; //f_p
            #10 send_input(1344'h0000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffff20d0baa970640f7410232c5a64d84f854642ff782c849957e7502cb0b9e3acd41c2e6ce9e4a5dc9f3d5eb2339d8c0f34e08a145d5283f326a24c1d6b055c1d0e0a34e522cefc25564a38822716f4c02c55d5f79dce56aa7e0b264321aeaec2b2c7893195347e542e9da95168d4442c7de17c675b5d66a51f);
            wait(next_element);

            //A_13
            #170; //padder
            #240; //f_p
            #10 send_input(1344'h000000000000000000000000000000000000000000000000000000000000000053bf73fc45a768c77aec54b96d65da20d0baa970640f7410232c5a64d84f854642ff782c849957e7502cb0b9e3acd41c2e6ce9e4a5dc9f3d5eb2339d8c0f34e08a145d5283f326a24c1d6b055c1d0e0a34e522cefc25564a38822716f4c02c55d5f79dce56aa7e0b264321aeaec2b2c7893195347e542e9da95168d4442c7de17c675b5d66a51bdf);
            wait(next_element);

            //A_14
            #170; //padder
            #240; //f_p
            #10 send_input(1344'h000000000000000000000000000000000000000000000000000000000000000053bf73fc45a768c77aec54b96d65da20d0baa970640f7410232c5a64d84f854642ff782c849957e7502cb0b9e3acd41c2e6ce9e4a5dc9f3d5eb2339d8c0f34e08a145d5283f326a24c1d6b055c1d0e0a34e522cefc25564a38822716f4c02c55d5f79dce56aa7e0b264321aeaec2b2c7893195347e542e9da95168d4442c7de17c675b5d66a51bdf);
            wait(next_element);

            //A_15
            #170; //padder
            #240; //f_p
            #10 send_input(1344'h000000000000000000000000000000000000000000000000000000000000000053bf73fc45a768c77aec54b96d65da20d0baa970640f7410232c5a64d84f854642ff782c849957e7502cb0b9e3acd41c2e6ce9e4a5dc9f3d5eb2339d8c0f34e08a145d5283f326a24c1d6b055c1d0e0a34e522cefc25564a38822716f4c02c55d5f79dce56aa7e0b264321aeaec2b2c7893195347e542e9da95168d4442c7de17c675b5d66a51bdf);  
            wait(next_element);
        end
    endtask

    // Task to y
    task y;
        begin
            mode = 2;
            /***y_0***/
            mem_sel = 0;
            #170; //padder
            #240; //f_p
            #10 send_input(1344'h00000000000000000000000000000000000000000000000000000000000000008D9E94B10727B4E42F4AD2A22ADFCAC596D0A6A2E9BD544F8683DEAC70809A29FFF9679D95AD76D95E7605F83C7B89FF610C7C48F47EAFE9563835E255E1456B03480A795ACCE67768882838E167BD3D3DF5CD1273F99A441D19977E4642F1CF8CEB0725ECA4473A0F86B4AABA8FF6B90C9E0B89851F9FEF5D70517821C5AFAB02F84B3E2D46DCA8);

            wait(sampler_squeeze);
            #170; //padder
            #240; //f_p
            #10 send_input(1344'h00000000000000000000000000000000000000000000000000000000000000008DAF1A54C3D69F97095127F689350494BD8FD10BA724D669038061F449D005529D998D98B503D9DED5CD45475FA163F27EEDF2DA937EC4D4FB1F7655EDF65E8D5C92B00B37B4835D72907A010723E6EBEAEF156F16A55F1B6E4476C28345DF87E327D79FB41725E511C2EC37636131B11A8E52F4E36BC18B19ED2F1E42A468B3E1822D6F8942F2DB);

            wait(sampler_squeeze);
            #170; //padder
            #240; //f_p
            #10 send_input(1344'h0000000000000000000000000000000000000000000000000000000000000000EB6848DAB5EECD1E0021C7070F1FB435CC3A07312C9558DF5A9C9680CED9299601F8B33AA0B0B351A412109BE477607B5F4D8211A7552689CB29023647EC028F57A9EDE9D7ADDB6990BB86F2EC0264F50259CD7340A95992425E6D5797D91F6A893A0FCC64E619B2E3D7B84FCF59EFC333EEE4128EA460867C5680336710DC1D13A4992FA8975CE4);

            wait(sampler_squeeze);
            #170; //padder
            #240; //f_p
            #10 send_input(1344'h0000000000000000000000000000000000000000000000000000000000000000B485224BB6415178672E1758C9455442B084BC1ACF3145BABF99772D175E6BA7B50DC142989AB90B31A660095B0E257734263B457B6E518D96D8389A48884CEDB31A6B2CA56B01D26275D2456F7AEAD9E219EAD3D87FF1CF1D78D231B35D082A1E703CFA06D193B4A3EAD17F2C1559E21C99B69FB11D0EE36744B519283C5E68AB19DBC5BD2ED8BD);

            wait(sampler_squeeze);
            #170; //padder
            #240; //f_p
            #10 send_input(1344'h0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000089C4443B0F3CFFE211F43BBB161E0A9A1C485D3D13D2F15B71AB0215F04EC9D7);

            /***y_1***/
            mem_sel = 1;
            #170; //padder
            #240; //f_p
            #10 send_input(1344'h0000000000000000000000000000000000000000000000000000000000000000DFBAF278434CAEE802D10E1912C436A2FB284D43F8759F9E67F0C16548130BCADD80973CD4DB7DB0D2028C682EBC131805D7A589F289C2D221F4E906E3639D4796E2916BE6784AE4D0A98E7687A567264AB5575D63B1133528C59F2B80C7373434346EF4B7E95B197DFE88D3472EDE4BE5BABD8CC59A103C4ABB05567F38BA7976A7CD486A2EF5EB);

            wait(sampler_squeeze);
            #170; //padder
            #240; //f_p
            #10 send_input(1344'h00000000000000000000000000000000000000000000000000000000000000006A7E45811FE7156709688934385ECB1B8AB3D0297423679880E601FA9AC53E509308965A5E98A3FBC5D75CDB714515948131C05AF78637D546BB157FA216AC11C60AD0367D9765D989D1E64C39D2100ACBCAA1ADBDA1A7AB672595499A9FF2B883BB5D7D6C032EFCF28AB54E0E301A0762A321B26216063A0FECE3DCBBDC1FD8FB55DA30C8A1D2FD);

            wait(sampler_squeeze);
            #170; //padder
            #240; //f_p
            #10 send_input(1344'h0000000000000000000000000000000000000000000000000000000000000000F689A4889B1E3A3F776FF27D816BDDB040CC3477D368DB8A67F74CD4C5C1127808039F9C65FAA0AACA4DD6B8FD9449AA586F5A6ABF7909907FB2F108CDBDB1572CF3555E3F64C7DEA6404DBC695BD8BEBC81117068316669853D84C9FAE431538F5C58D456E095EC71C901CC4AC2FCF7DDF023D79FED0D244B99BE6A9B919B412A8E30C47FB01217);

            wait(sampler_squeeze);
            #170; //padder
            #240; //f_p
            #10 send_input(1344'h0000000000000000000000000000000000000000000000000000000000000000D134ABD7BE24D5BA93FA7961A7D7E4545618D81EB6AEF232FA799C6609E85851CB4E6C5E89AF2B40E536161583660F0325DEB632A9246D3E9F592B441753167881B17A1879C652B80E1E2E012AD7AE06FC387942D93B0FE6F994D0E39372BC8BDC75ADD62462A8DFDAF33F30C296675EDE10161A3A28DCFF3F55AD06A8774399928234530860974C);

            wait(sampler_squeeze);
            #170; //padder
            #240; //f_p
            #10 send_input(1344'h00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000357B6CB8C7AC696AE6DEA22B0C473A19086522B4422DF96B54C6389187F94700);

            /***y_2***/
            mem_sel = 2;
            #170; //padder
            #240; //f_p
            #10 send_input(1344'h00000000000000000000000000000000000000000000000000000000000000000BB450EDC9029088BBB14043904D58B96957205E07569FCEE9713AF4BDFDF6CE45F93C10EB5A18F70E32B94AB1D4698467BCE39541A1C69A636CD9DC12BFCCE6C79EF35B5DA31CFC1627EAF58E7240432F06D7290BB25750BE5BE1CABB881FD27EFB7B20595DE65DE08E249EB1811B012034008C5EBCF052D26F6525E8845CC76ED3885C6440C3B4);

            wait(sampler_squeeze);
            #170; //padder
            #240; //f_p
            #10 send_input(1344'h00000000000000000000000000000000000000000000000000000000000000009EE11E3548B8565D581E6B395CA1D99BBBD07840D07506356F5BCFA5F5AB9CDDCB602A53ABFF7F959404ED1CA4EDCAFE2CA8DBC261FD194E3596AE308FCA5F620CD47F760993ADA85747154FB060BC429805AF7BDAC6F231BF18FE5E9D5DDD31955914F389C68656D329F5DFCC1BF92316BB41CCDD37C9A8AC9B48F052058715F832C0C0D91C0C57);

            wait(sampler_squeeze);
            #170; //padder
            #240; //f_p
            #10 send_input(1344'h00000000000000000000000000000000000000000000000000000000000000006FD622893E6F26F5E3C0AEABE9B8C0E225447EB14A0A2FEC6DDE70960D58742D46E47D50269B6F9AEA30AE9F3FF0B24873FBBBABDB8A29594773CC3B120211CC752B24B75A0DD905D96FBA4CF6F59EA19E37494BF0060F32729586C2782DD336C63E185A2B2ED1501EFAD01D99E4132C4409BB81F91F286220B860EE73ABDF65226D6F550874FC73);

            wait(sampler_squeeze);
            #170; //padder
            #240; //f_p
            #10 send_input(1344'h000000000000000000000000000000000000000000000000000000000000000027F1F811AA7B244B1289D6238015154EFCAC7FC5F018C4C99F6B24BF33066C80023ADC470689CE53DA568138261F08C6B9DE10D1979CDEF1095C06282ED1AFBEC8DCCF99849C62EC7082FEECFC612E2CA92143D6278B5B4D4C9A6F5A67D66740370B3C461B4F88A79FDC1D189CFE353D892C7F9CD98BC6C7E3F0AEF2FE7EC7C4D36248ACC8A38D33);

            wait(sampler_squeeze);
            #170; //padder
            #240; //f_p
            #10 send_input(1344'h000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000B6CA12F09F956ADFAC086FCF438CCE7C308BC930F3986E6FE294F51036B2764);

            /***y_3***/
            mem_sel = 3;
            #170; //padder
            #240; //f_p
            #10 send_input(1344'h00000000000000000000000000000000000000000000000000000000000000008517D4CB32EEF7DB62AD1916A15F955C796DA42DEBED496AAFC79AB8FE90EABEDCAD2A7636C69E72ED4E5AB799ABA644BC925AE64674461766ADF8EC9DB66BA841385212EAB76D5C09E651376CAB80B82CC97F5DF05B0DEAD5F4239479B0B50AFD910DC1D2AD40E2AD741182CF55727F841C3EF475CE1583DB4DA83D154A136AA9179CEEBE77D748);

            wait(sampler_squeeze);
            #170; //padder
            #240; //f_p
            #10 send_input(1344'h0000000000000000000000000000000000000000000000000000000000000000676A20D5D33374443514B646B59566F222DA01E91B2294FE962E3F2F54F76F9AF46E7F8DACA9A0B8851320891784F4FC8F6C21D2EBDB200CC26CA6536469F71C5035207C6C6D2BFCAD9DE5D57C2E326D8C83DBFEEA264BF081206FF308B2DDA724E080D42D45B4A781B19E0DBA64B9E145512A525D7DDFEB91886B67DE3DAF8F8496C6525747C4EE);

            wait(sampler_squeeze);
            #170; //padder
            #240; //f_p
            #10 send_input(1344'h000000000000000000000000000000000000000000000000000000000000000037D8A807F5D936428D6A5CF9B464FE124BDA4A65ACF8BFC4B7273B26ED07937A6ADE0C628263CE32FBE39C75A6E1BBB8FB1D730FB020DE142569D7CB86549927509004DFAC96588159C8E3028D3EAE5ABF8F862E0550D2A768AE39C0FF41C7A951F9FEFF9A21E45C5D7A6A458DEF30AAF13113B420A450162E84B6AF94590280B67AD34A7AE4EFE9);

            wait(sampler_squeeze);
            #170; //padder
            #240; //f_p
            #10 send_input(1344'h000000000000000000000000000000000000000000000000000000000000000020C89CDD77660EACC1AA154FFD50454AF2347C61A4682D50267D4C8BED8370999F49F9738545577E1883E70C0420470D52C5826F33C225FD5B302F49FF8D69FEC6FFC3F7056C966D19EEFA4E4F2854E8F0C4BA93FFD28F01629B06193F662118C50883BFA0A22DDD75B3AC118B97A0438CEA4621CCB4137B0895A281EF43030B69DD16FDA0A35842);

            wait(sampler_squeeze);
            #170; //padder
            #240; //f_p
            #10 send_input(1344'h0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000042BAC2862977F25275578AEB4DD3C3838008196E70C2476F1F673B2C9E9B20D4);


        end
    endtask

    // Task to c
    task c;
        begin
            //c
            /***Test Squeeze***/
            #170; //padder
            #240; //f_p
            mode = 3;
            #10 send_input(1344'h0000000000000000000000000000000000000000000000000000000000000000ffffffffffffffffffffffffffffffff20d0baa970640f7410232c5a64d84f854642ff782c849957e7502cb0b9e3acd41c2e6ce9e4a5dc9f3d5eb2339d8c0f34e08a145d5283f326a24c1d6b055c1d0e0a34e522cefc25564a38822716f4c02c55d5f79dce56aa7e0b264321aeaec2b2c7893195347e542e9da95168d4442c7de17c675b5d66a51f);
        end
    endtask

    // Test sequence
    initial begin
        // Initialize signals
        sampler_in_ready = 0;
        sampler_in = 0;
        

        // Apply reset
        apply_reset();

        // // Test case 0: S0
        // S0();

        // // Test case 1: A
        // A();

        // // Test case 2: y
        y();

        // // Test case 3: c
        // c();


        // Finish simulation
        #100 $finish;
    end

    // Monitor outputs during simulation
    initial begin
        $monitor($time, " sampler_squeeze=%b, next_element=%b, z0=%h, z1=%h, addr_z0=%d, addr_z1=%d, we_z=%b", 
            sampler_squeeze, next_element, z0, z1, addr_z0, addr_z1, we_z);
    end

    // always @(posedge clk) begin
    //     if(sampler_squeeze)begin
    //         #170; //padder
    //         #240; //f_p
    //         #10 send_input(1344'h0000000000000000000000000000000000000000000000000000000000000000e0218aa63a8d55e8c73e8806f1f0b46beb012e869fe38398a897a2bf4f3f45790275f275506a4f9c3f8cb944de59a8eb12ff1d4637e35d306a485f486c707148fb29ec61733ef9ccac3c74bd364df7ca9fe80b418626d2a09eaa7895fcadea693ddb067241160c4aea28e6261caafd9a9b6d87384e11f919b63bfa7dd30512f6188bd98dc6f556dd);
    //     end
    // end

endmodule
